{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aayush/Documents/GitHub/devRevTask/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aayush/Documents/GitHub/devRevTask/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aayush/Documents/GitHub/devRevTask/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useEffect}from'react';import{useCallback}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var URL=\"http://openlibrary.org/search.json?title=\";var AppContext=/*#__PURE__*/React.createContext();var AppProvider=function AppProvider(_ref){var children=_ref.children;var _useState=useState(\"the lost world\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),books=_useState4[0],setBooks=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),resultTitle=_useState8[0],setResultTitle=_useState8[1];var fetchBooks=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,docs,newBooks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.prev=1;_context.next=4;return fetch(\"\".concat(URL).concat(searchTerm));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;docs=data.docs;if(docs){newBooks=docs.slice(0,20).map(function(bookSingle){var key=bookSingle.key,author_name=bookSingle.author_name,cover_i=bookSingle.cover_i,edition_count=bookSingle.edition_count,first_publish_year=bookSingle.first_publish_year,title=bookSingle.title;return{id:key,author:author_name,cover_id:cover_i,edition_count:edition_count,first_publish_year:first_publish_year,title:title};});setBooks(newBooks);if(newBooks.length>1){setResultTitle(\"Your Search Result\");}else{setResultTitle(\"No Search Result Found!\");}}else{setBooks([]);setResultTitle(\"No Search Result Found!\");}setLoading(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0);setLoading(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);})),[searchTerm]);useEffect(function(){fetchBooks();},[searchTerm,fetchBooks]);return/*#__PURE__*/_jsx(AppContext.Provider,{value:{loading:loading,books:books,setSearchTerm:setSearchTerm,resultTitle:resultTitle,setResultTitle:setResultTitle},children:children});};export var useGlobalContext=function useGlobalContext(){return useContext(AppContext);};export{AppContext,AppProvider};","map":{"version":3,"names":["React","useState","useContext","useEffect","useCallback","URL","AppContext","createContext","AppProvider","children","searchTerm","setSearchTerm","books","setBooks","loading","setLoading","resultTitle","setResultTitle","fetchBooks","fetch","response","json","data","docs","newBooks","slice","map","bookSingle","key","author_name","cover_i","edition_count","first_publish_year","title","id","author","cover_id","length","console","log","useGlobalContext"],"sources":["C:/Users/aayush/Documents/GitHub/devRevTask/src/context..js"],"sourcesContent":["import React, {useState, useContext, useEffect} from 'react';\r\nimport { useCallback } from 'react';\r\nconst URL = \"http://openlibrary.org/search.json?title=\";\r\nconst AppContext = React.createContext();\r\n\r\nconst AppProvider = ({children}) => {\r\n    const [searchTerm, setSearchTerm] = useState(\"the lost world\");\r\n    const [books, setBooks] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [resultTitle, setResultTitle] = useState(\"\");\r\n\r\n    const fetchBooks = useCallback(async() => {\r\n        setLoading(true);\r\n        try{\r\n            const response = await fetch(`${URL}${searchTerm}`);\r\n            const data = await response.json();\r\n            const {docs} = data;\r\n\r\n            if(docs){\r\n                const newBooks = docs.slice(0, 20).map((bookSingle) => {\r\n                    const {key, author_name, cover_i, edition_count, first_publish_year, title} = bookSingle;\r\n\r\n                    return {\r\n                        id: key,\r\n                        author: author_name,\r\n                        cover_id: cover_i,\r\n                        edition_count: edition_count,\r\n                        first_publish_year: first_publish_year,\r\n                        title: title\r\n                    }\r\n                });\r\n\r\n                setBooks(newBooks);\r\n\r\n                if(newBooks.length > 1){\r\n                    setResultTitle(\"Your Search Result\");\r\n                } else {\r\n                    setResultTitle(\"No Search Result Found!\")\r\n                }\r\n            } else {\r\n                setBooks([]);\r\n                setResultTitle(\"No Search Result Found!\");\r\n            }\r\n            setLoading(false);\r\n        } catch(error){\r\n            console.log(error);\r\n            setLoading(false);\r\n        }\r\n    }, [searchTerm]);\r\n\r\n    useEffect(() => {\r\n        fetchBooks();\r\n    }, [searchTerm, fetchBooks]);\r\n\r\n    return (\r\n        <AppContext.Provider value = {{\r\n            loading, books, setSearchTerm, resultTitle, setResultTitle,\r\n        }}>\r\n            {children}\r\n        </AppContext.Provider>\r\n    )\r\n}\r\n\r\nexport const useGlobalContext = () => {\r\n    return useContext(AppContext);\r\n}\r\n\r\nexport {AppContext, AppProvider};"],"mappings":"mZAAA,MAAOA,MAAP,EAAeC,QAAf,CAAyBC,UAAzB,CAAqCC,SAArC,KAAqD,OAArD,CACA,OAASC,WAAT,KAA4B,OAA5B,C,2CACA,GAAMC,IAAG,CAAG,2CAAZ,CACA,GAAMC,WAAU,cAAGN,KAAK,CAACO,aAAN,EAAnB,CAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAAgB,IAAdC,SAAc,MAAdA,QAAc,CAChC,cAAoCR,QAAQ,CAAC,gBAAD,CAA5C,wCAAOS,UAAP,eAAmBC,aAAnB,eACA,eAA0BV,QAAQ,CAAC,EAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eACA,eAA8BZ,QAAQ,CAAC,IAAD,CAAtC,yCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAAsCd,QAAQ,CAAC,EAAD,CAA9C,yCAAOe,WAAP,eAAoBC,cAApB,eAEA,GAAMC,WAAU,CAAGd,WAAW,wEAAC,qKAC3BW,UAAU,CAAC,IAAD,CAAV,CAD2B,sCAGAI,MAAK,WAAId,GAAJ,SAAUK,UAAV,EAHL,QAGjBU,QAHiB,qCAIJA,SAAQ,CAACC,IAAT,EAJI,QAIjBC,IAJiB,eAKhBC,IALgB,CAKRD,IALQ,CAKhBC,IALgB,CAOvB,GAAGA,IAAH,CAAQ,CACEC,QADF,CACaD,IAAI,CAACE,KAAL,CAAW,CAAX,CAAc,EAAd,EAAkBC,GAAlB,CAAsB,SAACC,UAAD,CAAgB,CACnD,GAAOC,IAAP,CAA8ED,UAA9E,CAAOC,GAAP,CAAYC,WAAZ,CAA8EF,UAA9E,CAAYE,WAAZ,CAAyBC,OAAzB,CAA8EH,UAA9E,CAAyBG,OAAzB,CAAkCC,aAAlC,CAA8EJ,UAA9E,CAAkCI,aAAlC,CAAiDC,kBAAjD,CAA8EL,UAA9E,CAAiDK,kBAAjD,CAAqEC,KAArE,CAA8EN,UAA9E,CAAqEM,KAArE,CAEA,MAAO,CACHC,EAAE,CAAEN,GADD,CAEHO,MAAM,CAAEN,WAFL,CAGHO,QAAQ,CAAEN,OAHP,CAIHC,aAAa,CAAEA,aAJZ,CAKHC,kBAAkB,CAAEA,kBALjB,CAMHC,KAAK,CAAEA,KANJ,CAAP,CAQH,CAXgB,CADb,CAcJpB,QAAQ,CAACW,QAAD,CAAR,CAEA,GAAGA,QAAQ,CAACa,MAAT,CAAkB,CAArB,CAAuB,CACnBpB,cAAc,CAAC,oBAAD,CAAd,CACH,CAFD,IAEO,CACHA,cAAc,CAAC,yBAAD,CAAd,CACH,CACJ,CArBD,IAqBO,CACHJ,QAAQ,CAAC,EAAD,CAAR,CACAI,cAAc,CAAC,yBAAD,CAAd,CACH,CACDF,UAAU,CAAC,KAAD,CAAV,CAhCuB,iFAkCvBuB,OAAO,CAACC,GAAR,cACAxB,UAAU,CAAC,KAAD,CAAV,CAnCuB,qEAAD,GAqC3B,CAACL,UAAD,CArC2B,CAA9B,CAuCAP,SAAS,CAAC,UAAM,CACZe,UAAU,GACb,CAFQ,CAEN,CAACR,UAAD,CAAaQ,UAAb,CAFM,CAAT,CAIA,mBACI,KAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAI,CAC1BJ,OAAO,CAAPA,OAD0B,CACjBF,KAAK,CAALA,KADiB,CACVD,aAAa,CAAbA,aADU,CACKK,WAAW,CAAXA,WADL,CACkBC,cAAc,CAAdA,cADlB,CAA9B,UAGKR,QAHL,EADJ,CAOH,CAxDD,CA0DA,MAAO,IAAM+B,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAClC,MAAOtC,WAAU,CAACI,UAAD,CAAjB,CACH,CAFM,CAIP,OAAQA,UAAR,CAAoBE,WAApB"},"metadata":{},"sourceType":"module"}